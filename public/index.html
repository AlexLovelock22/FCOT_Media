<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Firebase Hosting</title>

  <!-- Firebase SDK scripts -->
  <script src="/__/firebase/10.4.0/firebase-app-compat.js"></script>
  <script src="/__/firebase/10.4.0/firebase-auth-compat.js"></script>
  <script src="/__/firebase/10.4.0/firebase-firestore-compat.js"></script>
  <!-- Include your other Firebase feature scripts here as needed -->
  <script defer src="/__/firebase/10.4.0/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-functions-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-storage-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-analytics-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-remote-config-compat.js"></script>
  <script defer src="/__/firebase/10.4.0/firebase-performance-compat.js"></script>

  <style media="screen">
    body {
      background: #ECEFF1;
      color: rgba(0, 0, 0, 0.87);
      font-family: Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    #message {
      background: white;
      max-width: 360px;
      margin: 100px auto 16px;
      padding: 32px 24px;
      border-radius: 3px;
    }

    #message h2 {
      color: #ffa100;
      font-weight: bold;
      font-size: 16px;
      margin: 0 0 8px;
    }

    #message h1 {
      font-size: 22px;
      font-weight: 300;
      color: rgba(0, 0, 0, 0.6);
      margin: 0 0 16px;
    }

    #message p {
      line-height: 140%;
      margin: 16px 0 24px;
      font-size: 14px;
    }

    #message a {
      display: block;
      text-align: center;
      background: #039be5;
      text-transform: uppercase;
      text-decoration: none;
      color: white;
      padding: 16px;
      border-radius: 4px;
    }

    #message,
    #message a {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
    }

    #load {
      color: rgba(0, 0, 0, 0.4);
      text-align: center;
      font-size: 13px;
    }

    @media (max-width: 600px) {

      body,
      #message {
        margin-top: 0;
        background: white;
        box-shadow: none;
      }

      body {
        border-top: 16px solid #ffa100;
      }
    }
  </style>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js'
    import {
      getFirestore,
      getDocs,
      collection,
      query,
      where
    } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-firestore.js'
    const firebaseConfig = {
      apiKey: "AIzaSyCtxBYLQ84DxSjQMGvksQvg7M2iCaBQ6g0",
      authDomain: "bsc-project-2-bf69a.firebaseapp.com",
      databaseURL: "https://bsc-project-2-bf69a-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "bsc-project-2-bf69a",
      storageBucket: "bsc-project-2-bf69a.appspot.com",
      messagingSenderId: "707357656239",
      appId: "1:707357656239:web:d36ff2687cb3dafc7bc05a",
      measurementId: "G-L51G2JCM55"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function getUserData() {
      const colRef = collection(db, 'Users')
      getDocs(colRef)
        .then((snapshot) => {

          let Users = []

          snapshot.docs.forEach((doc) => {
            Users.push({ ...doc.data(), id: doc.id })
          })
          console.log(Users)
        })

        .catch(err => {
          console.log(err.message)
        })
    }

    LoginButton.addEventListener("click", LoginFunction);

    var Password = "";

    function LoginFunction() {

      var username = document.getElementById("user").value;
      const colRef = collection(db, 'Users');
      const usernameToFind = username;
      const q = query(colRef, where('name', '==', usernameToFind));

      getDocs(q)
        .then((snapshot) => {
          let pass = null;
          snapshot.forEach((doc) => {
            // Assuming there is only one user with the same username
            pass = doc.data().pass;
          });

        if (pass !== null) {
            console.log(`Password for ${usernameToFind}: ${pass}`);
            Password = pass;
            ApproveLogin();
          } else {
            console.log(`No user found with username ${usernameToFind}`);
          }
        })

        .catch((err) => {
          console.log(err.message);
        });



    }

    function ApproveLogin(){
      console.log("Triggered");
      
      var passEntered = document.getElementById("pass").value;

      if (passEntered = Password) {
        alert("Login Success");
      }

      else {
        alert("Login Failed");
      }


    }


  
  </script>
</head>

<body>
  <div>
    <h1> WELCOME TO FCOT MEDIA </h1>
  </div>
  <div id="message">
    <h2>Welcome</h2>
    <h1>Firebase Hosting Setup Complete</h1>
    <p>You're seeing this because you've successfully set up Firebase Hosting. Now it's time to go build something
      extraordinary!</p>
    <a target="_blank" href="https://firebase.google.com/docs/hosting/">Open Hosting Documentation</a>
  </div>
  <p id="load">Firebase SDK Loading&hellip;</p>


  <form id="userForm">
    <label for="user">Username: </label><input type="text" id="user" required><br><br>
    <label for="pass">Password: </label><input type="password" id="pass" required><br><br>
    <input type="submit" value="Login" id="LoginButton">
  </form>
  <script>
    function storeInputData() {
      var username = document.getElementById("user").value;
      var password = document.getElementById("pass").value;
      console.log("Username: " + username);
      console.log("Password: " + password);
      document.getElementById("userForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent the form from submitting normally
        storeInputData(); // Call your function to store data
      });
    }

  </script>
</body>

</html>